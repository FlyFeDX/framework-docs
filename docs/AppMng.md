## [应用管理]()

### **功能简介**

- FeDX-framework框架允许系统管理员基于框架的基础能力通过应用管理功能创建应用并分配给不同的租户使用.
- 应用管理业务流程
  ![应用管理业务流程](../images/modules/应用管理流程.png)
- 应用管理功能模型
  ![应用管理功能模型](../images/modules/应用管理功能模型.png)
- 应用发布前,框架部署接入方案,目前仅支持以下两种:
  ![框架部署接入](../images/modules/框架使用（部署接入）.png)
- 应用管理使用场景(发布方式)
    1. 作为公司研发环境的后台管理系统,提供应用发布前的初始化配置,提供发布包(初始数据+迭代版本包*n),配置数据不再统一管理,现场环境自行维护；针对统一版本/部署单一系统的现场
    2. 在具备条件的现场(同一套数据库,产品隔离),部署应用管理模块,以租户和应用实现系统级别管理
    3. 在版本更新频繁且升级繁琐的现场,测试环境部署应用管理,重点关注版本发布功能

### **逻辑设计**

- 前端界面通过调用应用管理服务,对应用ß数据实现增删改查/定制信息/基本配置/发布访问等操作.
- bff层对应用相关数据进行操作.

### **功能及界面**

- 应用信息以列表方式呈现,支持以缩略图列表查看;展示应用基础信息,基础信息包含应用ID,应用名称,logo列(预览)等,与新增字段保持一致,列表根据最后更新时间倒序排列,支持根据以上条件快速查询.
  ![应用管理列表](../images/modules/应用管理-列表.png)
- 应用基础信息在新增时填写
    1. 已有字段:
        1. 应用名称(必填,文本框)
        2. 英文名称(必填,文本框,校验输入必须非中文,校验唯一)
        3. 应用描述(非必填,文本框)
    2. 需补充字段:
        1. 归属行业(非必填,文本框)
        2. 租户信息(非必填,文本框)
        3. 最后更新时间(新增自动生成,新增表单不需要)
        4. 上传logo(文件选择框,logoPath)
        5. 系统显示名(必填,文本框)
        6. 应用类型（选择框,必选; web/app/小程序--字典）
    3. id由接口层自动分配生成,英文名称作为访问应用的唯一标识需要校验唯一性,创建/更新时记录时间
- 以步骤条为导航分步骤进行定制/配置
- 应用定制内容包含登录页定制,欢迎页定制,error页定制,主题定制,菜单定制,插件定制;登录页/欢迎页/error页支持预览

    1.登录页定制-配置中心loginConfigs--定制页面支持预览(框架改造,localStorage传参)
  - 背景图片,登录页logo，登录框logo 文件上传组建
  - 登录页样式  json解析组件(在前段处理格式,剔除以上三项配置,为临时方案,待进一步拆解)
  ![应用管理登录页定制](../images/modules/应用管理-登录页定制.png)
    2.欢迎页定制-欢迎页支持3种类型:图片/系统信息通告/指定页面-配置中心welcomePageConfig(需整合)--定制页面支持预览(框架改造,localStorage传参)
    2.1 欢迎页定制支持上传固定图片
  ![应用管理欢迎页定制](../images/modules/应用管理-欢迎页定制-1.png)
    2.2 欢迎页定制支持配置页面路由
  ![应用管理欢迎页定制](../images/modules/应用管理-欢迎页定制-3.png)
    2.3 欢迎页定制支持指向系统信息通告,定制后的页面如下(页面需要重新设计)
  ![应用管理欢迎页定制](../images/modules/应用管理-欢迎页定制-2.png)
  - 原型:
  ![应用管理欢迎页定制](../images/modules/应用管理-欢迎页定制-系统信息通告.png)
  - 新设计(左侧获取用户信息,头像用默认;右侧根据设置显示)
  - 蓝湖 <https://share.lanhuapp.com/#/invite?sid=lX0Rapo8> :
  ![应用管理欢迎页定制](../images/modules/应用管理-欢迎页定制-系统信息通告new1.jpg)
  ![应用管理欢迎页定制](../images/modules/应用管理-欢迎页定制-系统信息通告new2.jpg)
  ![应用管理欢迎页定制](../images/modules/应用管理-欢迎页定制-系统信息通告new3.jpg)
    3.error页定制-error页支持2种类型:图片/指定页面-配置中心errorPageConfig(待增加)--定制页面支持预览(框架改造,localStorage传参)
  ![应用管理error页定制](../images/modules/应用管理-error页定制-1.png)
  ![应用管理error页定制](../images/modules/应用管理-error页定制-2.png)
    4.主题定制-使用主题定制平台功能(<http://10.12.2.187:9011/web-theme/>),发布主题后下载文件(原版本ß需要oss-UI手动更新发布后生效)--暂缓(改为可选默认主题)
  ![应用管理主题定制](../images/modules/应用管理-主题定制.png)
    5.菜单定制(页面参考功能角色管理-新增-功能选择,接口新增当前应用菜单)--使用菜单管理新增ß接口
  ![应用管理菜单定制](../images/modules/应用管理-菜单定制.png)

    6.插件定制-配置中心actionConfig(待整合)
  ![应用管理插件定制](../images/modules/应用管理-插件定制.png)
- 应用其他参数配置-说明参考<http://10.10.5.100:8090/pages/viewpage.action?pageId=5211090>,在上述步骤不进行定制的部分将使用文档中的默认配置--暂时不做
  ![应用管理参数配置](../images/modules/应用管理-参数配置.png)

- 应用信息支持修改;
- 应用信息支持删除,删除前进行校验;
- 应用信息生成后,可查看详情(同新增修改,不可编辑),可跳转进入到应用系统界面进行基础设置(菜单配置,用户配置,权限分配等)
- 点击"进入应用"按钮,可跳转至应用,根据英文名称分配路由;应用内可修改内容:系统配置/菜单配置/用户信息/角色信息/个人设置
- 应用内记录日志时关联appId

### **接口设计**

- 接口文档:<http://10.10.2.8:9091/project/261/interface/api>
- 界面通过调用service-security服务提供的rest接口完成对应用信息的操作.
  ![应用接口](../images/modules/应用管理-接口列表.png)
- 待补充/更新接口:
    1.新增校验
    2.基本信息模型字段
    3.配置中心项

## **性能,限制和约束**

- 点击查询.新增.修改.删除等操作界面呈现数据不得超过2s；
